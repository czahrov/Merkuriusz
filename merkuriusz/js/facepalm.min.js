!function(){var e={};e.launcher=function(){"function"==typeof e.page.default&&e.page.default();var t=window.location.pathname.match(new RegExp("^"+e.bazar.basePath+"(.*)$","i"))[1];if("/"==t)"function"==typeof e.page.index&&e.page.index();else{var n=t.match(/([\w\-]+)\/$/)[1],o=n.replace(/\-/g,"_");"string"==typeof n&&n.length&&("function"==typeof e.page[o]?e.page[o]():"function"==typeof e.page.alternate&&e.page.alternate())}},e.bazar={basePath:"/PiotrM/wp_merkuriusz",logger:/logger/i.test(window.location.hash),mobile:/mobile/i.test(window.location.hash)||void 0},e.addon={isLogger:function(){return e.bazar.logger||!1},isMobile:function(){var t=e.bazar;return(t.logger||!1)&&console.log("isMobile()"),void 0===t.mobile&&(t.mobile=/Mobile|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)),t.mobile},youtube:function(t){try{var n=e.bazar.logger||!1;if("string"!=typeof t.ID)throw"Niepoprawny ID filmu";if(!$(t.iframe).length)throw"iframe nie istnieje";return t.autoplay=t.autoplay||0,t.loop=t.loop||0,t.controls=t.controls||1,t.beforePlay=t.beforePlay||function(){},t.onClose=t.onClose||function(){},{el:t.iframe,url:"https://www.youtube.com/embed/"+t.ID+"?controls="+t.controls+"&autoplay="+t.autoplay+"&loop="+t.loop,open:function(){t.beforePlay(this.el),$(this.el).attr({src:this.url})},close:function(){t.onClose(this.el),$(this.el).attr({src:""})}}}catch(e){n&&console.error(e)}},form:{filters:{imie:/^[a-zA-Z \-żźćńółąśęŻŹĆŃÓŁĄŚĘ]+$/,nazwa:/^[\w \-żźćńółąśęŻŹĆŃÓŁĄŚĘ]+$/,adres:/^[\w \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\.,\d]+$/,telefon:/^[\d\+ \(\)]+$/,mail:/^[^\d_\.\-][\w\d \.\-!#\$%&'\*\+\/=\?^`\{\|\}~]{1,64}@\w+(?:\.\w+)+$/,tekst:/^[\w\s \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\[\]\{\}\|\+\?\.,\:;\$\^\*\(\)!#%~\/\\]*$/,tekst_req:/^[\w\s \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\[\]\{\}\|\+\?\.,\:;\$\^\*\(\)!#%~\/\\]+$/},verify:function(t){e.addon.isLogger()&&console.log("form.verify()");var n=this;if("object"==typeof t&&"number"==typeof t.length){var o=[];for(i in t){var r=$(t[i].item).val();if("object"!=typeof t[i]||void 0===r||"string"!=typeof t[i].filterName||"string"!=typeof t[i].name||void 0===n.filters[t[i].filterName])return!1;n.filters[t[i].filterName].test(r)||o.push(t[i].item)}return!o.length||o}return!1}}},e.page={default:function(){e.addon.isLogger()&&(window.facepalm=e,console.log("page.default()")),function(){$("#face-slider").hover(function(){$("#face-slider").stop().animate({left:"0"},1e3)},function(){$("#face-slider").stop().animate({left:"-302px"},1e3)})}(),function(e){e.addClass("open").siblings().removeClass("open")}($("ul.menu > .item.active")),function(e){e.children(".head").click(function(e){$(this).parent().toggleClass("open").siblings().removeClass("open")})}($("ul.menu > li")),function(){/cat=/.test(window.location.search)||$("ul.menu > .item.vip").addClass("open").siblings(".item").removeClass("open")}(),function(e,t,n,o){var r,i=0,a=o.length,l=function(){return Math.round($(n).width()/c())},c=function(){return o.first().outerWidth(!0)};e.on({next:function(t){i++,e.triggerHandler("set")},prev:function(t){i--,e.triggerHandler("set")},set:function(e){i<0?i=a-l():i%=a-l()+1,TweenLite.to(n,1,{scrollTo:{x:c()*i}})},start:function(t){r=window.setInterval(function(){e.triggerHandler("next")},2500)},stop:function(e){window.clearInterval(r)},mouseenter:function(t){e.triggerHandler("stop")},mouseleave:function(t){e.triggerHandler("start")}}).swipe({swipeLeft:function(t){e.triggerHandler("next")},swipeRight:function(t){e.triggerHandler("prev")}}),t.eq(0).click(function(t){e.triggerHandler("prev")}),t.eq(1).click(function(t){e.triggerHandler("next")}),e.triggerHandler("start")}($(".catalog-slider-wrapper"),$(".catalog-slider-wrapper > .catalog-arrow-box"),$(".catalog-slider-wrapper > .catalog-container"),$(".catalog-slider-wrapper > .catalog-container > .catalog-element")),function(e,t,n,o){var r=0,i=o.length,a=function(){return Math.round($(n).width()/l())},l=function(){return o.first().outerWidth(!0)};e.on({next:function(t){r++,e.triggerHandler("set")},prev:function(t){r--,e.triggerHandler("set")},set:function(e){r<0?r=i-a():r%=i-a()+1,TweenLite.to(n,1,{scrollTo:{x:l()*r}})}}).swipe({swipeLeft:function(t){e.triggerHandler("next")},swipeRight:function(t){e.triggerHandler("prev")}}),t.eq(0).click(function(t){e.triggerHandler("prev")}),t.eq(1).click(function(t){e.triggerHandler("next")})}($(".popup-content > .wystawiennicze-wrapper"),$(".popup-content ul.pager > li"),$(".popup-content > .wystawiennicze-wrapper"),$(".popup-content > .wystawiennicze-wrapper > .inner-catalog-wrapper")),function(e,t,n,o){var r,i=0;o.length;e.on({next:function(t){i++,e.triggerHandler("set")},prev:function(t){i--,e.triggerHandler("set")},set:function(e){var t=Math.floor(n.prop("scrollWidth")),o=Math.floor(n.width()),r=Math.floor(t/(.5*o));(i%=r)<0&&(i=r-1),TweenLite.to(n,1.5,{scrollTo:{x:Math.round(.5*o*i)},ease:Power2.easeInOut})},start:function(t){r=window.setInterval(function(){e.triggerHandler("next")},3e3)},stop:function(e){window.clearInterval(r)},mouseenter:function(t){e.triggerHandler("stop")},mouseleave:function(t){e.triggerHandler("start")}}).swipe({swipeLeft:function(){e.triggerHandler("next")},swipeRight:function(){e.triggerHandler("prev")}}),t.eq(0).click(function(){e.triggerHandler("prev")}),t.eq(1).click(function(){e.triggerHandler("next")}),e.triggerHandler("start")}($(".partner-slider"),$(".partner-slider > .partner-arrow-box"),$(".partner-slider > .partner-wrapper"),$(".partner-slider > .partner-wrapper > .partner-icon-box")),function(t){var n=!1;t.on({update:function(o){n||(n=!0,$.ajax({type:"GET",url:e.bazar.basePath+"/koszyk?status",success:function(e){try{var n=JSON.parse(e);n.num>0?t.children(".basket-text").text(n.num+" szt | "+n.price+" zł"):t.children(".basket-text").text("Pusty")}catch(t){console.error(t),console.log(e)}},complete:function(){n=!1}}))}})}($(".navbar .basket"))},alternate:function(){e.addon.isLogger()&&console.log("page.alternate()")},index:function(){e.addon.isLogger()&&console.log("page.index()"),function(e,t,n,o){var r=0,i=null,a=t.length;e.on({set:function(e){r<0&&(r+=a),r%=a,n.eq(r).addClass("active").siblings().removeClass("active"),t.eq(r).addClass("active").siblings().removeClass("active"),o.eq(r).addClass("active").siblings().removeClass("active"),TweenLite.fromTo(o.filter(".active"),1,{opacity:0},{opacity:1,ease:Power2.easeInOut})},next:function(t){r++,e.triggerHandler("set")},prev:function(t){r--,e.triggerHandler("set")},stop:function(e){window.clearInterval(i),i=null},start:function(t){null===i&&(i=window.setInterval(function(){e.triggerHandler("next")},2500))},mouseenter:function(t){e.triggerHandler("stop")},mouseleave:function(t){e.triggerHandler("start")}}).swipe({swipeLeft:function(t){e.triggerHandler("next")},swipeRight:function(t){e.triggerHandler("prev")}}),n.click(function(t){e.triggerHandler("stop"),r=$(this).index(),e.triggerHandler("set")}),e.triggerHandler("start")}($("#home .top-slider"),$("#home .top-slider > .text > .view > .item"),$("#home .top-slider > .imgs > .pagin > .item"),$("#home .top-slider > .imgs > .view > .item")),function(){$(".pop-up-clothes.clothes").click(function(){$(".catalog-popup").fadeIn(300)}),$(".popup > .pop-cross").click(function(){$(".cover-popup").fadeOut(300)}),$(".pop-up-clothes.movie").click(function(){$(".movie-cover-popup").fadeIn(300)}),$(".movie-cover-popup").click(function(){$(this).fadeOut(300)}),$(".pop-up-clothes.powerbank").click(function(){$(".powerbank-pop-up").fadeIn(300)}),$(".pop-up-clothes.wystawnicze").click(function(){$(".wystawnicze-pop-up").fadeIn(300)}),$(".pop-up-clothes.odziez-reklamowa").click(function(){$(".odziez-reklamowa-pop-up").fadeIn(300)}),$(".pop-up-clothes.dlugopisymetalowe").click(function(){$(".dlugopisymetalowe-pop-up").fadeIn(300)}),$(".pop-up-clothes.dlugopisyplastikowe").click(function(){$(".dlugopisyplastikowe-pop-up").fadeIn(300)}),$(".pop-up-clothes.torby").click(function(){$(".torby-pop-up").fadeIn(300)}),$(".pop-up-clothes.torby").click(function(){$(".torby-pop-up").fadeIn(300)})}(),function(){$(".main-picture-powerbank > .over").attr({href:$('ul.menu .item[item-slug="power_banki"]').attr("href")})}()},kategoria:function(){e.addon.isLogger()&&console.log("page.index()")},produkt:function(){e.addon.isLogger()&&console.log("page.produkt()"),function(e){try{var t=[];$("ul.menu .active").each(function(){t.push($(this).find(".head:first > .title").text())}),t.push(produkt_data.NAME),e.text(t.join(" > "))}catch(e){console.error(e)}}($("#grid > .top > .breadc")),function(e,t,n,o,r){var i=0,a=function(){return i*n.first().outerWidth(!0)};e.on({set:function(e){i<0&&(i=n.length-3),i%=n.length-2,TweenLite.to(t,.5,{scrollTo:{x:a()},ease:Power2.easeInOut})},next:function(t){i++,e.triggerHandler("set")},prev:function(t){i--,e.triggerHandler("set")}}).swipe({swipeLeft:function(t){e.triggerHandler("next")},swipeRight:function(t){e.triggerHandler("prev")}}),r.click(function(t){$(this).hasClass("next")?e.triggerHandler("next"):e.triggerHandler("prev")}),n.click(function(e){var t=$(this).css("backgroundImage");o.css({backgroundImage:t})})}($("#grid .pic > .mini"),$("#grid .pic > .mini > .view"),$("#grid .pic > .mini > .view > .item"),$("#grid .pic > .large"),$("#grid .pic > .mini > .nav")),function(e,t,n,o,r){e.on({open:function(t){e.addClass("open")},close:function(t){e.removeClass("open ready"),o.attr({src:""})},img:function(e,t){var n=t.match(/\("(.+)"\)/);o.attr({src:n[1]})},ready:function(t){e.addClass("ready")}}),o.on({load:function(t){e.triggerHandler("ready")}}),r.click(function(t){e.triggerHandler("open"),e.triggerHandler("img",[r.css("background-image")])}),n.add(e).click(function(t){e.triggerHandler("close")}),t.click(function(e){e.stopPropagation()})}($("#single > .popup"),$("#single > .popup > .box"),$("#single > .popup > .box > .header > .close"),$("#single > .popup > .box > .img > img"),$("#grid .pic > .large")),function(t,n,o,r,i,a,l,c,s){var u=!1,d=!1,p=!1,f=!1;t.on({init:function(e){l.hide(),r.parent().hide(),t.triggerHandler("wynik",["clear"]),t.triggerHandler("notify",["",""])},test:function(e){var t=/^\d+$/.test(n.val()),i=parseInt(n.val())>0,l=null!==o.val(),c="brak"==o.val(),s=null!==r.val();t&&i&&(c||l&&s)?(u=!0,d=!(c||!l),a.addClass("active")):(u=!1,a.removeClass("active"))},wynik:function(e,t){"open"===t?l.slideDown():"close"===t?l.slideUp():"clear"===t&&(l.find(".line.partial:not(.proto)").remove(),c.text("-"))},calculate:function(i){u&&!p&&(p=!0,t.triggerHandler("notify",["wait","Obliczam..."]),$.ajax({type:"POST",url:e.bazar.basePath+"/kalkulator",data:{nazwa:produkt_data.NAME,num:parseInt(n.val()),mark:o.val(),colors:parseInt(r.val()),price:produkt_data.PRICE},success:function(e,n){if("fail"!==e.trim())try{var o=JSON.parse(e);t.triggerHandler("notify",["ok"]),t.triggerHandler("fill",o)}catch(n){console.error(n),console.log(e),t.triggerHandler("notify",["fail","Błąd serwera. Proszę spróbować ponownie za chwilę"])}else t.triggerHandler("notify",["fail","Nie można obliczyć ceny. Brak cennika dla wybranego typu znakowania"])},error:function(){t.triggerHandler("notify",["fail","Błąd komunikacji z serwerem. Proszę spróbować ponownie za chwilę"])},complete:function(){p=!1}}))},fill:function(e,n){t.triggerHandler("wynik",["clear"]);var o=l.find(".line.proto"),r=l.find(".line.total");$.each(n.lines,function(e,t){var n=o.clone().removeClass("proto hide");n.children(".field.name").text(t.title),n.children(".field.formula").text(t.formula),n.children(".field.sum").text(t.total),r.before(n)}),c.text(n.total),t.triggerHandler("wynik",["open"])},notify:function(e,t,n){i.removeClass("ok wait fail info").addClass(t),i.children(".text").html("").html(n)},cart:function(i){if(f)return!1;f=!0;var a={zamowienie:function(){return"@"+(new Date).getTime()}(),ID:produkt_data.ID,nazwa:produkt_data.NAME,opis:produkt_data.DSCR,num:parseInt(n.val()),mark:{type:o.val(),place:o.children("option:selected").attr("size")},colors:parseInt(r.val()),colorname:produkt_data.COLOR,price:produkt_data.PRICE};console.log(a),t.triggerHandler("notify",["wait","Dodaję do koszyka..."]),$.ajax({type:"POST",url:e.bazar.basePath+"/koszyk",data:a,success:function(e){try{var n=JSON.parse(e);console.log(n),t.triggerHandler("notify",[n.status,n.msg]),"ok"===n.status&&(t.find(".tcell.dane").trigger("reset"),t.triggerHandler("wynik",["close"]),t.triggerHandler("wynik",["clear"]),$(".navbar .basket").triggerHandler("update"))}catch(n){console.log(e),t.triggerHandler("notify",["fail","Błąd odpowiedzi serwera. Spróbuj ponownie za chwilę"])}},error:function(){t.triggerHandler("notify",["fail","Błąd komunikacji z serwerem. Proszę spróbować ponownie za chwilę"])},complete:function(){f=!1}})}}),t.triggerHandler("init"),n.add(o).add(r).change(function(e){t.triggerHandler("wynik",["close"]),t.triggerHandler("notify"),t.triggerHandler("test")}),o.change(function(e){"brak"===$(this).val()?r.parent().fadeOut():r.parent().fadeIn()}),a.click(function(e){$(this).hasClass("active")&&t.triggerHandler("calculate")}),s.click(function(e){t.triggerHandler("cart")})}($(".table.kalkulator"),$(".table.kalkulator .tcell.dane > .line.ilosc > input"),$(".table.kalkulator .tcell.dane > .line.typ > select"),$(".table.kalkulator .tcell.dane > .line.kolory > select"),$(".table.kalkulator .tcell.dane > .line.button > .status"),$(".table.kalkulator .tcell.dane > .line.button > .calc"),$(".table.kalkulator .tcell.wynik"),$(".table.kalkulator .tcell.wynik > .total  > .sum > span"),$(".table.kalkulator .tcell.wynik > .line.cart > div"))},koszyk:function(){var t=e.addon;t.isLogger()&&console.log("page.koszyk()"),function(e,t,n,o,r,i){buyMode=!1,e.on({remove:function(t){$.post(window.location.origin+window.location.pathname+"?del",e.serializeArray(),function(e){try{var t=JSON.parse(e);console.log(t),"ok"===t.status&&(window.alert("za chwile nastąpi przekierowanie"),window.location.reload())}catch(t){console.error(t),console.log(e)}})}}),t.change(function(){e.find("input:checkbox:checked").length<1&&(i.triggerHandler("hide"),buyMode=!1)}),o.click(function(t){e.triggerHandler("remove")}),r.click(function(t){buyMode?i.triggerHandler("hide"):!buyMode&&e.find("input:checkbox:checked").length>0&&i.triggerHandler("show")})}($("form.opcje"),$("form.opcje input:checkbox"),$("form.opcje input:checkbox + label"),$("form.opcje .buttons > .del"),$("form.opcje .buttons > .buy"),$("form.form")),function(e,n,o,r,i,a,l,c,s,u){var d=!1,p=!1;e.add(s).hide(),e.on({show:function(t){e.slideDown()},hide:function(t){e.slideUp(),e.trigger("reset")},send:function(l){if(d)return!1;d=!0;var c=[{name:"imie",item:n,filterName:"imie"},{name:"tel",item:o,filterName:"telefon"},{name:"mail",item:r,filterName:"mail"},{name:"msg",item:a,filterName:"tekst"}];if(test=t.form.verify(c),!0===test){var p=new FormData;$.each(e.serializeArray(),function(e,t){p.append(t.name,t.value)}),$.each(u.serializeArray(),function(e,t){p.append(t.name,t.value)}),i.prop("files").length>0&&$.each(i.prop("files"),function(e,t){p.append("file",t)}),$.ajax({type:"POST",url:window.location.origin+window.location.pathname+"?buy",data:p,contentType:!1,processData:!1,xhr:function(){return jqxhr=new XMLHttpRequest,jqxhr.upload.addEventListener("loadstart",function(e){s.fadeIn("fast")}),jqxhr.upload.addEventListener("progress",function(t){e.triggerHandler("upload",[t.loaded/t.total])}),jqxhr.upload.addEventListener("loadend",function(t){s.fadeOut("slow",function(){e.triggerHandler("upload",[0])})}),jqxhr},beforeSend:function(){e.triggerHandler("notify",["wait","Wysyłam mail..."])},success:function(t){e.triggerHandler("notify",["ok","Mail wysłany pomyślnie!"]),console.log(t);try{var n=JSON.parse(t);console.log(n),e.triggerHandler("notify",[n.status,n.msg]),"ok"===n.status&&window.setTimeout(function(){window.location.reload()},3e3)}catch(e){console.error(e),console.warn(t)}},error:function(){},complete:function(){d=!1}})}else $.each(test,function(e,t){t.addClass("err")})},notify:function(e,t,n){c.removeClass("ok fail info wait").addClass(t).children(".text").html(n)},upload:function(e,t){var n=Math.round(Math.pow(10,4)*t)/100;s.children(".progres").text(n),TweenLite.to(s.children(".bar"),.3,{scaleX:t})}}),i.change(function(e){var t=$(this).prop("files"),n=$(this).next(".input").children(".title");t.length>0?(p=!0,n.text(t[0].name)):(p=!1,n.text("Dodaj załącznik"))}).next(".input").click(function(e){i.click()}),l.click(function(){e.triggerHandler("send")}),n.add(o).add(r).focus(function(){$(this).removeClass("err")})}($("form.form"),$("form.form .field.imie > input"),$("form.form .field.tel > input"),$("form.form .field.mail > input"),$("form.form .field.file > input"),$("form.form .field.msg > textarea"),$("form.form > .tbottom > .button"),$("form.form > .tbottom > .status"),$("form.form > .tbottom > .status > .load"),$("form.opcje"))}},$(function(){e.launcher()})}();