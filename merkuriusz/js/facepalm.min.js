!function(){var e={};e.launcher=function(){"function"==typeof e.page.default&&e.page.default();var t=window.location.pathname.match(new RegExp("^"+e.bazar.basePath+"(.*)$","i"))[1];if("/"==t)"function"==typeof e.page.index&&e.page.index();else{var n=t.match(/([\w\-]+)\/$/)[1],r=n.replace(/\-/g,"_");"string"==typeof n&&n.length&&("function"==typeof e.page[r]?e.page[r]():"function"==typeof e.page.alternate&&e.page.alternate())}},e.bazar={basePath:"/PiotrM/wp_merkuriusz",logger:/logger/i.test(window.location.hash),mobile:/mobile/i.test(window.location.hash)||void 0},e.addon={isLogger:function(){return e.bazar.logger||!1},isMobile:function(){var t=e.bazar;return(t.logger||!1)&&console.log("isMobile()"),void 0===t.mobile&&(t.mobile=/Mobile|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)),t.mobile},youtube:function(t){try{var n=e.bazar.logger||!1;if("string"!=typeof t.ID)throw"Niepoprawny ID filmu";if(!$(t.iframe).length)throw"iframe nie istnieje";return t.autoplay=t.autoplay||0,t.loop=t.loop||0,t.controls=t.controls||1,t.beforePlay=t.beforePlay||function(){},t.onClose=t.onClose||function(){},{el:t.iframe,url:"https://www.youtube.com/embed/"+t.ID+"?controls="+t.controls+"&autoplay="+t.autoplay+"&loop="+t.loop,open:function(){t.beforePlay(this.el),$(this.el).attr({src:this.url})},close:function(){t.onClose(this.el),$(this.el).attr({src:""})}}}catch(e){n&&console.error(e)}},form:{filters:{imie:/^[a-zA-Z \-żźćńółąśęŻŹĆŃÓŁĄŚĘ]+$/,nazwa:/^[\w \-żźćńółąśęŻŹĆŃÓŁĄŚĘ]+$/,adres:/^[\w \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\.,\d]+$/,telefon:/^[\d\+ \(\)]+$/,mail:/^[^\d_\.\-][\w\d \.\-!#\$%&'\*\+\/=\?^`\{\|\}~]{1,64}@\w+(?:\.\w+)+$/,tekst:/^[\w\s \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\[\]\{\}\|\+\?\.,\:;\$\^\*\(\)!#%~\/\\]*$/,tekst_req:/^[\w\s \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\[\]\{\}\|\+\?\.,\:;\$\^\*\(\)!#%~\/\\]+$/},verify:function(t){e.addon.isLogger()&&console.log("form.verify()");var n=this;if("object"==typeof t&&"number"==typeof t.length){var r=[];for(i in t){var o=$(t[i].item).val();if("object"!=typeof t[i]||void 0===o||"string"!=typeof t[i].filterName||"string"!=typeof t[i].name||void 0===n.filters[t[i].filterName])return!1;n.filters[t[i].filterName].test(o)||r.push(t[i].item)}return!r.length||r}return!1}}},e.page={default:function(){e.addon.isLogger()&&(window.facepalm=e,console.log("page.default()")),function(){$("#face-slider").hover(function(){$("#face-slider").stop().animate({left:"0"},1e3)},function(){$("#face-slider").stop().animate({left:"-302px"},1e3)})}(),function(e){e.addClass("open").siblings().removeClass("open")}($("ul.menu > .item.active")),function(e){e.children(".head").click(function(e){$(this).parent().toggleClass("open").siblings().removeClass("open")})}($("ul.menu > li")),function(){/cat=/.test(window.location.search)||$("ul.menu > .item.vip").addClass("open").siblings(".item").removeClass("open")}(),function(e,t,n,r){var i,o=0,a=r.length,l=function(){return Math.round($(n).width()/c())},c=function(){return r.first().outerWidth(!0)};e.on({next:function(t){o++,e.triggerHandler("set")},prev:function(t){o--,e.triggerHandler("set")},set:function(e){o<0?o=a-l():o%=a-l()+1,TweenLite.to(n,1,{scrollTo:{x:c()*o}})},start:function(t){i=window.setInterval(function(){e.triggerHandler("next")},2500)},stop:function(e){window.clearInterval(i)},mouseenter:function(t){e.triggerHandler("stop")},mouseleave:function(t){e.triggerHandler("start")}}).swipe({swipeLeft:function(t){e.triggerHandler("next")},swipeRight:function(t){e.triggerHandler("prev")}}),t.eq(0).click(function(t){e.triggerHandler("prev")}),t.eq(1).click(function(t){e.triggerHandler("next")}),e.triggerHandler("start")}($(".catalog-slider-wrapper"),$(".catalog-slider-wrapper > .catalog-arrow-box"),$(".catalog-slider-wrapper > .catalog-container"),$(".catalog-slider-wrapper > .catalog-container > .catalog-element")),function(e,t,n,r){var i=0,o=r.length,a=function(){return Math.round($(n).width()/l())},l=function(){return r.first().outerWidth(!0)};e.on({next:function(t){i++,e.triggerHandler("set")},prev:function(t){i--,e.triggerHandler("set")},set:function(e){i<0?i=o-a():i%=o-a()+1,TweenLite.to(n,1,{scrollTo:{x:l()*i}})}}).swipe({swipeLeft:function(t){e.triggerHandler("next")},swipeRight:function(t){e.triggerHandler("prev")}}),t.eq(0).click(function(t){e.triggerHandler("prev")}),t.eq(1).click(function(t){e.triggerHandler("next")})}($(".popup-content > .wystawiennicze-wrapper"),$(".popup-content ul.pager > li"),$(".popup-content > .wystawiennicze-wrapper"),$(".popup-content > .wystawiennicze-wrapper > .inner-catalog-wrapper")),function(e,t,n,r){var i,o=0;r.length;e.on({next:function(t){o++,e.triggerHandler("set")},prev:function(t){o--,e.triggerHandler("set")},set:function(e){var t=Math.floor(n.prop("scrollWidth")),r=Math.floor(n.width()),i=Math.floor(t/(.5*r));(o%=i)<0&&(o=i-1),TweenLite.to(n,1.5,{scrollTo:{x:Math.round(.5*r*o)},ease:Power2.easeInOut})},start:function(t){i=window.setInterval(function(){e.triggerHandler("next")},3e3)},stop:function(e){window.clearInterval(i)},mouseenter:function(t){e.triggerHandler("stop")},mouseleave:function(t){e.triggerHandler("start")}}).swipe({swipeLeft:function(){e.triggerHandler("next")},swipeRight:function(){e.triggerHandler("prev")}}),t.eq(0).click(function(){e.triggerHandler("prev")}),t.eq(1).click(function(){e.triggerHandler("next")}),e.triggerHandler("start")}($(".partner-slider"),$(".partner-slider > .partner-arrow-box"),$(".partner-slider > .partner-wrapper"),$(".partner-slider > .partner-wrapper > .partner-icon-box")),function(t){var n=!1;t.on({update:function(r){n||(n=!0,$.ajax({type:"GET",url:e.bazar.basePath+"/koszyk?status",success:function(e){try{var n=JSON.parse(e);n.num>0?t.children(".basket-text").text(n.num+" szt | "+n.price+" zł"):t.children(".basket-text").text("Pusty")}catch(t){console.error(t),console.log(e)}},complete:function(){n=!1}}))}})}($(".navbar .basket"))},alternate:function(){e.addon.isLogger()&&console.log("page.alternate()")},index:function(){e.addon.isLogger()&&console.log("page.index()"),function(e,t,n,r){var i=0,o=null,a=t.length;e.on({set:function(e){i<0&&(i+=a),i%=a,n.eq(i).addClass("active").siblings().removeClass("active"),t.eq(i).addClass("active").siblings().removeClass("active"),r.eq(i).addClass("active").siblings().removeClass("active"),TweenLite.fromTo(r.filter(".active"),1,{opacity:0},{opacity:1,ease:Power2.easeInOut})},next:function(t){i++,e.triggerHandler("set")},prev:function(t){i--,e.triggerHandler("set")},stop:function(e){window.clearInterval(o),o=null},start:function(t){null===o&&(o=window.setInterval(function(){e.triggerHandler("next")},2500))},mouseenter:function(t){e.triggerHandler("stop")},mouseleave:function(t){e.triggerHandler("start")}}).swipe({swipeLeft:function(t){e.triggerHandler("next")},swipeRight:function(t){e.triggerHandler("prev")}}),n.click(function(t){e.triggerHandler("stop"),i=$(this).index(),e.triggerHandler("set")}),e.triggerHandler("start")}($("#home .top-slider"),$("#home .top-slider > .text > .view > .item"),$("#home .top-slider > .imgs > .pagin > .item"),$("#home .top-slider > .imgs > .view > .item")),function(){$(".pop-up-clothes.clothes").click(function(){$(".catalog-popup").fadeIn(300)}),$(".popup > .pop-cross").click(function(){$(".cover-popup").fadeOut(300)}),$(".pop-up-clothes.movie").click(function(){$(".movie-cover-popup").fadeIn(300)}),$(".movie-cover-popup").click(function(){$(this).fadeOut(300)}),$(".pop-up-clothes.powerbank").click(function(){$(".powerbank-pop-up").fadeIn(300)}),$(".pop-up-clothes.wystawnicze").click(function(){$(".wystawnicze-pop-up").fadeIn(300)}),$(".pop-up-clothes.odziez-reklamowa").click(function(){$(".odziez-reklamowa-pop-up").fadeIn(300)}),$(".pop-up-clothes.dlugopisymetalowe").click(function(){$(".dlugopisymetalowe-pop-up").fadeIn(300)}),$(".pop-up-clothes.dlugopisyplastikowe").click(function(){$(".dlugopisyplastikowe-pop-up").fadeIn(300)}),$(".pop-up-clothes.torby").click(function(){$(".torby-pop-up").fadeIn(300)}),$(".pop-up-clothes.torby").click(function(){$(".torby-pop-up").fadeIn(300)})}(),function(){$(".main-picture-powerbank > .over").attr({href:$('ul.menu .item[item-slug="power_banki"]').attr("href")})}()},kategoria:function(){e.addon.isLogger()&&console.log("page.index()")},produkt:function(){e.addon.isLogger()&&console.log("page.produkt()"),function(e,t,n,r,i){var o=0,a=function(){return o*n.first().outerWidth(!0)};e.on({set:function(e){o<0&&(o=n.length-3),o%=n.length-2,TweenLite.to(t,.5,{scrollTo:{x:a()},ease:Power2.easeInOut})},next:function(t){o++,e.triggerHandler("set")},prev:function(t){o--,e.triggerHandler("set")}}).swipe({swipeLeft:function(t){e.triggerHandler("next")},swipeRight:function(t){e.triggerHandler("prev")}}),i.click(function(t){$(this).hasClass("next")?e.triggerHandler("next"):e.triggerHandler("prev")}),n.click(function(e){var t=$(this).css("backgroundImage");r.css({backgroundImage:t})})}($("#grid .pic > .mini"),$("#grid .pic > .mini > .view"),$("#grid .pic > .mini > .view > .item"),$("#grid .pic > .large"),$("#grid .pic > .mini > .nav")),function(e,t,n,r,i){e.on({open:function(t){e.addClass("open")},close:function(t){e.removeClass("open ready"),r.attr({src:""})},img:function(e,t){var n=t.match(/\("(.+)"\)/);r.attr({src:n[1]})},ready:function(t){e.addClass("ready")}}),r.on({load:function(t){e.triggerHandler("ready")}}),i.click(function(t){e.triggerHandler("open"),e.triggerHandler("img",[i.css("background-image")])}),n.add(e).click(function(t){e.triggerHandler("close")}),t.click(function(e){e.stopPropagation()})}($("#single > .popup"),$("#single > .popup > .box"),$("#single > .popup > .box > .header > .close"),$("#single > .popup > .box > .img > img"),$("#grid .pic > .large")),function(t,n,r,i,o,a,l,c,s){var p=!1,u=!1,g=!1,d=!1;t.on({init:function(e){l.hide(),i.parent().hide(),t.triggerHandler("wynik",["clear"]),t.triggerHandler("notify",["",""])},test:function(e){var t=/^\d+$/.test(n.val()),o=parseInt(n.val())>0,l=null!==r.val(),c="brak"==r.val(),s=null!==i.val();t&&o&&(c||l&&s)?(p=!0,u=!(c||!l),a.addClass("active")):(p=!1,a.removeClass("active"))},wynik:function(e,t){"open"===t?l.slideDown():"close"===t?l.slideUp():"clear"===t&&(l.find(".line.partial:not(.proto)").remove(),c.text("-"))},calculate:function(o){p&&!g&&(g=!0,t.triggerHandler("notify",["wait","Obliczam..."]),$.ajax({type:"POST",url:e.bazar.basePath+"/kalkulator",data:{nazwa:produkt_data.NAME,num:parseInt(n.val()),mark:r.val(),colors:parseInt(i.val()),price:produkt_data.PRICE},success:function(e,n){if("fail"!==e.trim())try{var r=JSON.parse(e);t.triggerHandler("notify",["ok"]),t.triggerHandler("fill",r)}catch(n){console.error(n),console.log(e),t.triggerHandler("notify",["fail","Błąd serwera. Proszę spróbować ponownie za chwilę"])}else t.triggerHandler("notify",["fail","Nie można obliczyć ceny. Brak cennika dla wybranego typu znakowania"])},error:function(){t.triggerHandler("notify",["fail","Błąd komunikacji z serwerem. Proszę spróbować ponownie za chwilę"])},complete:function(){g=!1}}))},fill:function(e,n){t.triggerHandler("wynik",["clear"]);var r=l.find(".line.proto"),i=l.find(".line.total");$.each(n.lines,function(e,t){var n=r.clone().removeClass("proto hide");n.children(".field.name").text(t.title),n.children(".field.formula").text(t.formula),n.children(".field.sum").text(t.total),i.before(n)}),c.text(n.total),t.triggerHandler("wynik",["open"])},notify:function(e,t,n){o.removeClass("ok wait fail info").addClass(t),o.children(".text").html("").html(n)},cart:function(o){if(d)return!1;d=!0;var a={zamowienie:function(){return"@"+(new Date).getTime()}(),ID:produkt_data.ID,nazwa:produkt_data.NAME,opis:produkt_data.DSCR,num:parseInt(n.val()),mark:{type:r.val(),place:r.children("option:selected").attr("size")},colors:parseInt(i.val()),colorname:produkt_data.COLOR,price:produkt_data.PRICE};console.log(a),t.triggerHandler("notify",["wait","Dodaję do koszyka..."]),$.ajax({type:"POST",url:e.bazar.basePath+"/koszyk",data:a,success:function(e){try{var n=JSON.parse(e);console.log(n),t.triggerHandler("notify",[n.status,n.msg]),"ok"===n.status&&(t.find(".tcell.dane").trigger("reset"),t.triggerHandler("wynik",["close"]),t.triggerHandler("wynik",["clear"]),$(".navbar .basket").triggerHandler("update"))}catch(n){console.log(e),t.triggerHandler("notify",["fail","Błąd odpowiedzi serwera. Spróbuj ponownie za chwilę"])}},error:function(){t.triggerHandler("notify",["fail","Błąd komunikacji z serwerem. Proszę spróbować ponownie za chwilę"])},complete:function(){d=!1}})}}),t.triggerHandler("init"),n.add(r).add(i).change(function(e){t.triggerHandler("wynik",["close"]),t.triggerHandler("notify"),t.triggerHandler("test")}),r.change(function(e){"brak"===$(this).val()?i.parent().fadeOut():i.parent().fadeIn()}),a.click(function(e){$(this).hasClass("active")&&t.triggerHandler("calculate")}),s.click(function(e){t.triggerHandler("cart")})}($(".table.kalkulator"),$(".table.kalkulator .tcell.dane > .line.ilosc > input"),$(".table.kalkulator .tcell.dane > .line.typ > select"),$(".table.kalkulator .tcell.dane > .line.kolory > select"),$(".table.kalkulator .tcell.dane > .line.button > .status"),$(".table.kalkulator .tcell.dane > .line.button > .calc"),$(".table.kalkulator .tcell.wynik"),$(".table.kalkulator .tcell.wynik > .total  > .sum > span"),$(".table.kalkulator .tcell.wynik > .line.cart > div"))},koszyk:function(){e.addon.isLogger()&&console.log("page.koszyk()")}},$(function(){e.launcher()})}();