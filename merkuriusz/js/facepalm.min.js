!function(){var e={};e.launcher=function(){"function"==typeof e.page.default&&e.page.default();var t=window.location.pathname.match(new RegExp("^"+e.bazar.basePath+"(.*)$","i"))[1];if("/"==t)"function"==typeof e.page.index&&e.page.index();else{var n=t.match(/([^\/]+)/g).slice(-1)[0],o=n.replace(/\-/g,"_");"string"==typeof n&&n.length&&("function"==typeof e.page[o]?e.page[o]():"function"==typeof e.page.alternate&&e.page.alternate())}},e.bazar={basePath:"/PiotrM/wp_merkuriusz",logger:/logger/i.test(window.location.hash),mobile:/mobile/i.test(window.location.hash)||void 0},e.addon={isLogger:function(){return e.bazar.logger||!1},isMobile:function(){var t=e.bazar;return(t.logger||!1)&&console.log("isMobile()"),void 0===t.mobile&&(t.mobile=/Mobile|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)),t.mobile},youtube:function(t){try{var n=e.bazar.logger||!1;if("string"!=typeof t.ID)throw"Niepoprawny ID filmu";if(!$(t.iframe).length)throw"iframe nie istnieje";return t.autoplay=t.autoplay||0,t.loop=t.loop||0,t.controls=t.controls||1,t.beforePlay=t.beforePlay||function(){},t.onClose=t.onClose||function(){},{el:t.iframe,url:"https://www.youtube.com/embed/"+t.ID+"?controls="+t.controls+"&autoplay="+t.autoplay+"&loop="+t.loop,open:function(){t.beforePlay(this.el),$(this.el).attr({src:this.url})},close:function(){t.onClose(this.el),$(this.el).attr({src:""})}}}catch(e){n&&console.error(e)}},form:{filters:{imie:/^[a-zA-Z \-żźćńółąśęŻŹĆŃÓŁĄŚĘ]+$/,nazwa:/^[\w \-żźćńółąśęŻŹĆŃÓŁĄŚĘ]+$/,adres:/^[\w \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\.,\d]+$/,telefon:/^[\d\+ \(\)]+$/,mail:/^[^\d_\.\-][\w\d \.\-!#\$%&'\*\+\/=\?^`\{\|\}~]{1,64}@\w+(?:\.\w+)+$/,tekst:/^[\w\s \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\[\]\{\}\|\+\?\.,\:;\$\^\*\(\)!#%~\/\\]*$/,tekst_req:/^[\w\s \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\[\]\{\}\|\+\?\.,\:;\$\^\*\(\)!#%~\/\\]+$/},verify:function(t){e.addon.isLogger()&&console.log("form.verify()");var n=this;if("object"==typeof t&&"number"==typeof t.length){var o=[];for(i in t){var r=$(t[i].item).val();if("object"!=typeof t[i]||void 0===r||"string"!=typeof t[i].filterName||"string"!=typeof t[i].name||void 0===n.filters[t[i].filterName])return!1;n.filters[t[i].filterName].test(r)||o.push(t[i].item)}return!o.length||o}return!1}}},e.page={default:function(){e.addon.isLogger()&&(window.facepalm=e,console.log("page.default()")),function(e,t){var n=window.location.origin+window.location.pathname.match(/^(.*)\/$/)[1];/kategoria|produkt/.test(location.pathname)?t.addClass("active"):e.filter('[href="'+n+'"]').addClass("active")}($("#menu > .grid > .box > a"),$("#sidebar ul.menu > .title")),function(e,t){t.click(function(n){e.add(t).toggleClass("open")})}($("#menu > .grid"),$("#menu > .grid > .toggle")),function(){$("#face-slider").hover(function(){$("#face-slider").stop().animate({left:"0"},1e3)},function(){$("#face-slider").stop().animate({left:"-302px"},1e3)})}(),function(e){e.addClass("open").siblings().removeClass("open")}($("ul.menu > .item.active")),function(e){e.children(".head").click(function(e){$(this).parent().toggleClass("open").siblings().removeClass("open")})}($("ul.menu > li")),function(e,t,n,o){var r,i=0,a=o.length,l=function(){return Math.round($(n).width()/c())},c=function(){return o.first().outerWidth(!0)};e.on({next:function(t){i++,e.triggerHandler("set")},prev:function(t){i--,e.triggerHandler("set")},set:function(e){i<0?i=a-l():i%=a-l()+1,TweenLite.to(n,1,{scrollTo:{x:c()*i}})},start:function(t){r=window.setInterval(function(){e.triggerHandler("next")},2500)},stop:function(e){window.clearInterval(r)},mouseenter:function(t){e.triggerHandler("stop")},mouseleave:function(t){e.triggerHandler("start")}}).swipe({swipeLeft:function(t){e.triggerHandler("next")},swipeRight:function(t){e.triggerHandler("prev")}}),t.eq(0).click(function(t){e.triggerHandler("prev")}),t.eq(1).click(function(t){e.triggerHandler("next")}),e.triggerHandler("start")}($(".catalog-slider-wrapper"),$(".catalog-slider-wrapper > .catalog-arrow-box"),$(".catalog-slider-wrapper > .catalog-container"),$(".catalog-slider-wrapper > .catalog-container > .catalog-element")),function(e,t,n,o){var r=0,i=o.length,a=function(){return Math.round($(n).width()/l())},l=function(){return o.first().outerWidth(!0)};e.on({next:function(t){r++,e.triggerHandler("set")},prev:function(t){r--,e.triggerHandler("set")},set:function(e){r<0?r=i-a():r%=i-a()+1,TweenLite.to(n,1,{scrollTo:{x:l()*r}})}}).swipe({swipeLeft:function(t){e.triggerHandler("next")},swipeRight:function(t){e.triggerHandler("prev")}}),t.eq(0).click(function(t){e.triggerHandler("prev")}),t.eq(1).click(function(t){e.triggerHandler("next")})}($(".popup-content > .wystawiennicze-wrapper"),$(".popup-content ul.pager > li"),$(".popup-content > .wystawiennicze-wrapper"),$(".popup-content > .wystawiennicze-wrapper > .inner-catalog-wrapper")),function(e,t,n,o){var r,i=0;o.length;e.on({next:function(t){i++,e.triggerHandler("set")},prev:function(t){i--,e.triggerHandler("set")},set:function(e){var t=Math.floor(n.prop("scrollWidth")),o=Math.floor(n.width()),r=Math.floor(t/(.5*o));(i%=r)<0&&(i=r-1),TweenLite.to(n,1.5,{scrollTo:{x:Math.round(.5*o*i)},ease:Power2.easeInOut})},start:function(t){r=window.setInterval(function(){e.triggerHandler("next")},3e3)},stop:function(e){window.clearInterval(r)},mouseenter:function(t){e.triggerHandler("stop")},mouseleave:function(t){e.triggerHandler("start")}}).swipe({swipeLeft:function(){e.triggerHandler("next")},swipeRight:function(){e.triggerHandler("prev")}}),t.eq(0).click(function(){e.triggerHandler("prev")}),t.eq(1).click(function(){e.triggerHandler("next")}),e.triggerHandler("start")}($(".partner-slider"),$(".partner-slider > .partner-arrow-box"),$(".partner-slider > .partner-wrapper"),$(".partner-slider > .partner-wrapper > .partner-icon-box")),function(e){var t=!1;e.on({update:function(n){t||(t=!0,$.ajax({type:"GET",url:"../koszyk?status",success:function(t){try{var n=JSON.parse(t);n.num>0?e.children(".basket-text").text(n.num+" szt | "+n.price+" zł"):e.children(".basket-text").text("Pusty")}catch(e){console.error(e),console.log(t)}},complete:function(){t=!1}}))}})}($("#basket")),function(e,t,n,o){t.submit(function(e){e.preventDefault()})}($("#home > .newsletter"),$("#home > .newsletter form"),$("#home > .newsletter form > .mail"),$("#home > .newsletter form > .send"))},alternate:function(){e.addon.isLogger()&&console.log("page.alternate()")},index:function(){e.addon.isLogger()&&console.log("page.index()"),function(e,t,n){var o,r=0,i=null,a=n.length,l=!1;e.on({set:function(e,i){o=r,"next"===i?++r:"prev"===i&&--r,r<0&&(r+=a),r%=a,t.eq(r).addClass("active").siblings().removeClass("active");var c=new TimelineLite({onStart:function(){n.eq(r).css("z-index",2),n.eq(r).siblings().css("z-index",1)},onComplete:function(){l=!1},paused:!0}).add("start",0);"next"===i||"prev"===i?(TweenLite.set(n,{scaleX:0}),c.add(TweenLite.fromTo(n.eq(r),1,{transformOrigin:"next"===i?"right":"left",scaleX:0,opacity:1},{scaleX:1,ease:Power2.easeInOut}),"start").add(TweenLite.fromTo(n.eq(o),1,{transformOrigin:"next"===i?"left":"right",scaleX:1,opacity:1},{scaleX:0,ease:Power2.easeInOut}),"start")):void 0===i&&c.add(TweenLite.to(n.not(n.eq(r)),1,{opacity:0}),"start").add(TweenLite.fromTo(n.eq(r),1,{opacity:0,scaleX:1},{opacity:1}),"start"),c.play()},next:function(t){l||(l=!0,e.triggerHandler("set",["next"]))},prev:function(t){l||(l=!0,e.triggerHandler("set",["prev"]))},stop:function(e){window.clearInterval(i),i=null},start:function(t){null===i&&(i=window.setInterval(function(){e.triggerHandler("next")},3500))},mouseenter:function(t){e.triggerHandler("stop")},mouseleave:function(t){e.triggerHandler("start")}}).swipe({swipeLeft:function(t){e.triggerHandler("next")},swipeRight:function(t){e.triggerHandler("prev")}}),t.click(function(t){var n=$(this).index();n!==r&&(e.triggerHandler("stop"),r=n,e.triggerHandler("set"))}),e.triggerHandler("set"),e.triggerHandler("start")}($("#home .top-slider"),$("#home .top-slider > .imgs > .pagin > .item"),$("#home .top-slider > .imgs > .view > .item")),function(e,t,n,o,r,i,a,l,c,s,d,u,g){var f=!1;e.on({open:function(n,o,a){if(console.log(a),f)return!1;f=!0,i.attr("src",function(){try{var e=a.match(/[^"]+/g);if(e.length<3)throw{msg:"Niewłaściwy adres obrazka",reason:e};return e[1]}catch(e){console.error(e)}}),r.filter('[class*="'+o+'"]').show().siblings().hide(),new TimelineLite({onStart:function(){e.addClass("open")},onComplete:function(){t.attr("style",""),f=!1}}).add("start",0).add(TweenLite.fromTo(e,.5,{opacity:0},{opacity:1}),"start").add(TweenLite.fromTo(t,.5,{y:-200,rotationX:-90},{y:0,rotationX:0}),"start+=0.5")},close:function(n){if(f)return!1;f=!0,new TimelineLite({onComplete:function(){e.removeClass("open"),t.attr("style",""),f=!1}}).add("start",0).add(TweenLite.to(t,.5,{y:-200,rotationX:90}),"start").add(TweenLite.to(e,.5,{opacity:0}),"start+=0.5")}}),e.add(n).click(function(t){e.triggerHandler("close")}),t.click(function(e){e.stopPropagation()}),a.click(function(t){e.triggerHandler("open",["odziez",$(this).parents(".item.odziez").css("background-image")])}),l.click(function(t){e.triggerHandler("open",["dlugPlast",$(this).css("background-image")])}),c.click(function(t){e.triggerHandler("open",["dlugMetal",$(this).css("background-image")])}),s.click(function(t){e.triggerHandler("open",["torby",$(this).css("background-image")])}),d.click(function(t){e.triggerHandler("open",["pompony",$(this).css("background-image")])}),u.click(function(t){e.triggerHandler("open",["kubki",$(this).css("background-image")])}),g.click(function(t){e.triggerHandler("open",["smycze",$(this).css("background-image")])})}($("#home > .popup"),$("#home > .popup > .box"),$("#home > .popup > .box > .close-fp"),$("#home > .popup > .box > .viewbox"),$("#home > .popup > .box > .viewbox > .view"),$("#home > .popup > .box > .viewbox > .view .pic img"),$("#home .kafelki .item.odziez .link"),$("#home > .catalog-slider .catalog-element > .catalog.dlugPlast"),$("#home > .catalog-slider .catalog-element > .catalog.dlugMetal"),$("#home > .catalog-slider .catalog-element > .catalog.torby"),$("#home > .catalog-slider .catalog-element > .catalog.pompony"),$("#home > .catalog-slider .catalog-element > .catalog.kubki"),$("#home > .catalog-slider .catalog-element > .catalog.smycze"))},kategoria:function(){e.addon.isLogger()&&console.log("page.index()"),function(e){try{var t=[];$("ul.menu > .item.active, ul.menu > .item.active .item.active").each(function(){t.push($(this).find(".head:first > .title").text().trim())}),e.text(t.join(" | "))}catch(e){console.error(e)}}($("#grid > .top > .breadc"))},produkt:function(){e.addon.isLogger()&&console.log("page.produkt()"),$("body#single").length>0&&(function(e){try{var t=[];$("ul.menu > .item.active, ul.menu > .item.active .item.active").each(function(){t.push($(this).find(".head:first > .title").text().trim())}),t.push(produkt_data.NAME),e.text(t.join(" | "))}catch(e){console.error(e)}}($("#grid > .top > .breadc")),function(e,t,n,o,r){var i=0,a=function(){return i*n.first().outerWidth(!0)};e.on({set:function(e){i<0&&(i=n.length-3),i%=n.length-2,TweenLite.to(t,.5,{scrollTo:{x:a()},ease:Power2.easeInOut})},next:function(t){i++,e.triggerHandler("set")},prev:function(t){i--,e.triggerHandler("set")}}).swipe({swipeLeft:function(t){e.triggerHandler("next")},swipeRight:function(t){e.triggerHandler("prev")}}),r.click(function(t){$(this).hasClass("next")?e.triggerHandler("next"):e.triggerHandler("prev")}),n.click(function(e){var t=$(this).css("backgroundImage");o.css({backgroundImage:t})})}($("#grid .pic > .mini"),$("#grid .pic > .mini > .view"),$("#grid .pic > .mini > .view > .item"),$("#grid .pic > .large"),$("#grid .pic > .mini > .nav")),function(e,t,n,o,r){e.on({open:function(t){e.addClass("open")},close:function(t){e.removeClass("open ready"),o.attr({src:""})},img:function(e,t){var n=t.match(/\("(.+)"\)/);o.attr({src:n[1]})},ready:function(t){e.addClass("ready")}}),o.on({load:function(t){e.triggerHandler("ready")}}),r.click(function(t){e.triggerHandler("open"),e.triggerHandler("img",[r.css("background-image")])}),n.add(e).click(function(t){e.triggerHandler("close")}),t.click(function(e){e.stopPropagation()})}($("#single > .popup"),$("#single > .popup > .box"),$("#single > .popup > .box > .header > .close"),$("#single > .popup > .box > .img > img"),$("#grid .pic > .large")),function(e,t,n,o,r,a,l,c,s){var d=!1,u=!1,g=!1,f=!1;e.on({init:function(t){l.hide(),o.parent().hide(),e.triggerHandler("wynik",["clear"]),e.triggerHandler("notify",["",""])},test:function(e){var r=/^\d+$/.test(t.val()),i=parseInt(t.val())>0,l=null!==n.val(),c="brak"==n.val(),s=null!==o.val();r&&i&&(c||l&&s)?(d=!0,u=!(c||!l),a.addClass("active")):(d=!1,a.removeClass("active"))},wynik:function(e,t){"open"===t?l.slideDown():"close"===t?l.slideUp():"clear"===t&&(l.find(".line.partial:not(.proto)").remove(),c.text("-"))},calculate:function(r){d&&!g&&(g=!0,e.triggerHandler("notify",["wait","Obliczam..."]),$.ajax({type:"POST",url:"../kalkulator",data:{nazwa:produkt_data.NAME,num:parseInt(t.val()),mark:n.val(),colors:parseInt(o.val()),price:produkt_data.PRICE.BRUTTO},success:function(t,n){if("fail"!==t.trim())try{var o=JSON.parse(t);e.triggerHandler("notify",["ok"]),e.triggerHandler("fill",o)}catch(n){console.error(n),console.log(t),e.triggerHandler("notify",["fail","Błąd serwera. Proszę spróbować ponownie za chwilę"])}else e.triggerHandler("notify",["info",'Dla tego typu znakowania prowadzimy wycenę indywidualną.<br>Zadzwoń: <span class="bold">000-000-000</span>,<br>skorzystaj z naszego <span class="bold">formularzu kontakowego</span>,<br>albo napisz: <span class="bold">biuro@merkuriusz.pl</span>'])},error:function(){e.triggerHandler("notify",["fail","Błąd komunikacji z serwerem. Proszę spróbować ponownie za chwilę"])},complete:function(){g=!1}}))},fill:function(t,n){e.triggerHandler("wynik",["clear"]);var o=l.find(".line.proto"),r=l.find(".line.total");$.each(n.lines,function(e,t){var n=o.clone().removeClass("proto hide");n.children(".field.name").text(t.title),n.children(".field.formula").text(t.formula),n.children(".field.sum").text(t.total),r.before(n)}),c.text(n.total),e.triggerHandler("wynik",["open"])},notify:function(e,t,n){r.removeClass("ok wait fail info").addClass(t),r.children(".text").html("").html(n)},cart:function(r){if(f)return!1;f=!0;var i={zamowienie:function(){return"@"+(new Date).getTime()}(),ID:produkt_data.ID,nazwa:produkt_data.NAME,opis:produkt_data.DSCR,num:parseInt(t.val()),mark:{type:n.val(),place:n.children("option:selected").attr("size")},colors:parseInt(o.val()),colorname:produkt_data.COLOR,price:produkt_data.PRICE.BRUTTO};console.log(i),e.triggerHandler("notify",["wait","Dodaję do koszyka..."]),$.ajax({type:"POST",url:"../koszyk",data:i,success:function(t){try{var n=JSON.parse(t);console.log(n),e.triggerHandler("notify",[n.status,n.msg]),"ok"===n.status&&(e.find(".tcell.dane").trigger("reset"),e.triggerHandler("wynik",["close"]),e.triggerHandler("wynik",["clear"]),$("#basket").triggerHandler("update"))}catch(n){console.log(t),e.triggerHandler("notify",["fail","Błąd odpowiedzi serwera. Spróbuj ponownie za chwilę"])}},error:function(){e.triggerHandler("notify",["fail","Błąd komunikacji z serwerem. Proszę spróbować ponownie za chwilę"])},complete:function(){f=!1}})}}),e.triggerHandler("init"),t.add(n).add(o).change(function(t){e.triggerHandler("wynik",["close"]),e.triggerHandler("notify"),e.triggerHandler("test")}),n.change(function(e){if("brak"===$(this).val())o.parent().fadeOut();else{o.children("option:not(:disabled)").remove();var t=n.children("option:selected"),r=parseInt(t.attr("cmin"))||1,a=parseInt(t.attr("cmax"))||1;for(i=r;i<=a;i++)$($("<option></option>").attr("value",i).text(i)).appendTo(o);o.parent().fadeIn()}}),a.click(function(t){$(this).hasClass("active")&&e.triggerHandler("calculate")}),s.click(function(t){e.triggerHandler("cart")})}($(".table.kalkulator"),$(".table.kalkulator .tcell.dane > .line.ilosc > input"),$(".table.kalkulator .tcell.dane > .line.typ > select"),$(".table.kalkulator .tcell.dane > .line.kolory > select"),$(".table.kalkulator .tcell.dane > .line.button > .status"),$(".table.kalkulator .tcell.dane > .line.button > .calc"),$(".table.kalkulator .tcell.wynik"),$(".table.kalkulator .tcell.wynik > .total  > .sum > span"),$(".table.kalkulator .tcell.wynik > .line.cart > div")))},koszyk:function(){var t=e.addon;t.isLogger()&&console.log("page.koszyk()"),function(e,t,n,o,r,i){buyMode=!1,e.on({remove:function(t){$.post(window.location.origin+window.location.pathname+"?del",e.serializeArray(),function(e){try{var t=JSON.parse(e);console.log(t),"ok"===t.status&&(window.alert("za chwile nastąpi przekierowanie"),window.location.reload())}catch(t){console.error(t),console.log(e)}})}}),t.change(function(){e.find("input:checkbox:checked").length<1&&(i.triggerHandler("hide"),buyMode=!1)}),o.click(function(t){e.triggerHandler("remove")}),r.click(function(t){buyMode?i.triggerHandler("hide"):!buyMode&&e.find("input:checkbox:checked").length>0&&i.triggerHandler("show")})}($("form.opcje"),$("form.opcje input:checkbox"),$("form.opcje input:checkbox + label"),$("form.opcje .buttons > .del"),$("form.opcje .buttons > .buy"),$("form.form")),function(e,n,o,r,i,a,l,c,s,d){var u=!1,g=!1;e.add(s).hide(),e.on({show:function(t){e.slideDown()},hide:function(t){e.slideUp(),e.trigger("reset")},send:function(l){if(u)return!1;u=!0;var c=[{name:"imie",item:n,filterName:"imie"},{name:"tel",item:o,filterName:"telefon"},{name:"mail",item:r,filterName:"mail"},{name:"msg",item:a,filterName:"tekst"}];if(test=t.form.verify(c),!0===test){var g=new FormData;$.each(e.serializeArray(),function(e,t){g.append(t.name,t.value)}),$.each(d.serializeArray(),function(e,t){g.append(t.name,t.value)}),i.prop("files").length>0&&$.each(i.prop("files"),function(e,t){g.append("file",t)}),$.ajax({type:"POST",url:window.location.origin+window.location.pathname+"?buy",data:g,contentType:!1,processData:!1,xhr:function(){return jqxhr=new XMLHttpRequest,jqxhr.upload.addEventListener("loadstart",function(e){s.fadeIn("fast")}),jqxhr.upload.addEventListener("progress",function(t){e.triggerHandler("upload",[t.loaded/t.total])}),jqxhr.upload.addEventListener("loadend",function(t){s.fadeOut("slow",function(){e.triggerHandler("upload",[0])})}),jqxhr},beforeSend:function(){e.triggerHandler("notify",["wait","Wysyłam mail..."])},success:function(t){e.triggerHandler("notify",["ok","Mail wysłany pomyślnie!"]),console.log(t);try{var n=JSON.parse(t);console.log(n),e.triggerHandler("notify",[n.status,n.msg]),"ok"===n.status&&window.setTimeout(function(){window.location.reload()},3e3)}catch(e){console.error(e),console.warn(t)}},error:function(){},complete:function(){u=!1}})}else $.each(test,function(e,t){t.addClass("err")})},notify:function(e,t,n){c.removeClass("ok fail info wait").addClass(t).children(".text").html(n)},upload:function(e,t){var n=Math.round(Math.pow(10,4)*t)/100;s.children(".progres").text(n),TweenLite.to(s.children(".bar"),.3,{scaleX:t})}}),i.change(function(e){var t=$(this).prop("files"),n=$(this).next(".input").children(".title");t.length>0?(g=!0,n.text(t[0].name)):(g=!1,n.text("Dodaj załącznik"))}).next(".input").click(function(e){i.click()}),l.click(function(){e.triggerHandler("send")}),n.add(o).add(r).focus(function(){$(this).removeClass("err")})}($("form.form"),$("form.form .field.imie > input"),$("form.form .field.tel > input"),$("form.form .field.mail > input"),$("form.form .field.file > input"),$("form.form .field.msg > textarea"),$("form.form > .tbottom > .button"),$("form.form > .tbottom > .status"),$("form.form > .tbottom > .status > .load"),$("form.opcje"))}},$(function(){e.launcher()})}();