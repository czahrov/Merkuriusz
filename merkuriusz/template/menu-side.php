<div id='sidebar' class='base2 grow'>
	<!-- SIDEBAR NAVIGATION -->
	<div class="sidebar-navigation background-white">
		<?php
			$input = array(
				'Odzież reklamowa' => array(
					'class' => '',
					'items' => array(
						array(
							'title' => 'Koszulki reklamowe',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Bluzy',
						),
						array(
							'title' => 'Kurtki',
						),
						array(
							'title' => 'Odzież biznesowa',
						),
						array(
							'title' => 'Odzież dziecięca',
						),
						array(
							'title' => 'Ręczniki i szlafroki',
						),
						array(
							'title' => 'Odzież robocza',
						),
						array(
							'title' => 'Bistro',
						),
						array(
							'title' => 'Fashion',
						),
						array(
							'title' => 'New',
						),
						array(
							'title' => 'Spodnie',
						),
						array(
							'title' => 'Torby',
						),
						array(
							'title' => 'Koszulki Polo',
						),
						array(
							'title' => 'Polary reklamowe',
						),
						array(
							'title' => 'Kurtki Softshell',
						),
						array(
							'title' => 'Czapki reklamowe',
						),
						array(
							'title' => 'Odzież sportowa',
						),
						array(
							'title' => 'Bawełna organiczna',
						),
						array(
							'title' => 'Zdrowie i uroda',
						),
						array(
							'title' => 'Bielizna',
						),
						array(
							'title' => 'Buty',
						),
						array(
							'title' => 'Rozmiar S',
						),
						array(
							'title' => 'T-shirt',
						),
						
					),
				),
				'Czas i pogoda' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Zegary na biurko',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Stacje pogodowe',
						),
						array(
							'title' => 'Zegarki VIP',
						),
						array(
							'title' => 'Zegary ścienne',
						),
						array(
							'title' => 'Zegarki na rękę',
						),
						array(
							'title' => 'Smartwach MyKronoz',
						),
						
					),
				),
				'Kubki i filiżanki' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Kubki reklamowe',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Filiżanki',
						),
						array(
							'title' => 'Kubki termiczne i termosy',
						),
						array(
							'title' => 'Kubki plastikowe',
						),
						array(
							'title' => 'Kufle',
						),
						array(
							'title' => 'Szkło',
						),
						array(
							'title' => 'Serwisy kawowe - zestawy',
						),
						array(
							'title' => 'Opakowania',
						),
						array(
							'title' => 'Bidony i butelki',
						),
						
					),
				),
				'Torby i plecaki' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Aktówki i torby konferencyjne',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Plecaki reklamowe',
						),
						array(
							'title' => 'Teczki na dokumenty',
						),
						array(
							'title' => 'Torby bawełniane',
						),
						array(
							'title' => 'Torby i teczki VIP',
						),
						array(
							'title' => 'Torby na biodro',
						),
						array(
							'title' => 'Torby na laptopa',
						),
						array(
							'title' => 'Torby na zakupy',
						),
						array(
							'title' => 'Torby papierowe',
						),
						array(
							'title' => 'Torby podróżne',
						),
						array(
							'title' => 'Torby sportowe',
						),
						array(
							'title' => 'Torby termiczne',
						),
						array(
							'title' => 'Worki',
						),
						
					),
				),
				'Materiały piśmiennicze' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Długopisy plastikowe',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Długopisy z touch penem',
						),
						array(
							'title' => 'Długopisy metalowe',
						),
						array(
							'title' => 'Długopisy ekologiczne',
						),
						array(
							'title' => 'Długopisy drewniane',
						),
						array(
							'title' => 'Ołówki reklamowe',
						),
						
					),
				),
				'Zakreślacze' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Eko długopisy',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Kredki',
						),
						array(
							'title' => 'Ołówki',
						),
						array(
							'title' => 'Pióra wieczne i kulkowe',
						),
						array(
							'title' => 'Przybory do pisania VIP',
						),
						array(
							'title' => 'Zestawy do malowania',
						),
						array(
							'title' => 'Zestawy piśmienne',
						),
						array(
							'title' => 'Zestawy piśmiennicze',
						),
						
					),
				),
				'USB, PowerBank i Dyski' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Pamięć USB',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Powerbanki',
						),
						array(
							'title' => 'Dyski twarde',
						),
						array(
							'title' => 'Pendrive\'y PQI',
						),
						array(
							'title' => 'Pendrive\'y Silicon Power',
						),
						array(
							'title' => 'Pendrive\'y VIP',
						),
						array(
							'title' => 'Opakowania do USB',
						),
						
					),
				),
				'Narzędzia, latarki i breloki' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Akcesoria samochodowe',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Breloki reklamowe',
						),
						array(
							'title' => 'Latarki',
						),
						array(
							'title' => 'Miarki i taśmy miernicze',
						),
						array(
							'title' => 'Narzędzia',
						),
						array(
							'title' => 'Noże i scyzoryki',
						),
						array(
							'title' => 'Piersiówki',
						),
						array(
							'title' => 'Scyzoryki VICTORINOX',
						),
						array(
							'title' => 'Zapalniczki',
						),
						
					),
				),
				'Wakacje, sport i rekreacja' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Akcesoria plażowe',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Akcesoria podróżne',
						),
						array(
							'title' => 'Akcesoria rowerowe',
						),
						array(
							'title' => 'Fitness',
						),
						array(
							'title' => 'Foto i Video',
						),
						array(
							'title' => 'Grill i akcesoria BBQ',
						),
						array(
							'title' => 'Gry i zabawa',
						),
						array(
							'title' => 'Koce i ręczniki plażowe',
						),
						array(
							'title' => 'Kompasy',
						),
						array(
							'title' => 'Kosze piknikowe',
						),
						array(
							'title' => 'Lornetki',
						),
						array(
							'title' => 'Maty, leżaki i materace',
						),
						array(
							'title' => 'Okulary',
						),
						array(
							'title' => 'Piłki plażowe',
						),
						array(
							'title' => 'Strefa kibica',
						),
						
					),
				),
				'Dzieci i zabawa' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Słodycze',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Długopisy i ołówki',
						),
						array(
							'title' => 'Gry i zabawki',
						),
						array(
							'title' => 'Kredki',
						),
						array(
							'title' => 'Lupy',
						),
						array(
							'title' => 'Odblaski',
						),
						array(
							'title' => 'Piórniki',
						),
						array(
							'title' => 'Pluszaki reklamowe',
						),
						array(
							'title' => 'Skarbonki',
						),
						array(
							'title' => 'Zestawy małego artysty',
						),
						
					),
				),
				'VIP Collections' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Cacharel',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Cerruti 1881',
						),
						array(
							'title' => 'Christian Lacroix',
						),
						array(
							'title' => 'Diplomat',
						),
						array(
							'title' => 'Ferraghini',
						),
						array(
							'title' => 'Herlitz',
						),
						array(
							'title' => 'Jean-Louis Scherrer',
						),
						array(
							'title' => 'Mark Twain',
						),
						array(
							'title' => 'Nina Ricci',
						),
						array(
							'title' => 'Pelikan',
						),
						array(
							'title' => 'Ungaro',
						),
						array(
							'title' => 'Victorinox',
						),
						array(
							'title' => 'Victorinox Delemont Collection',
						),
						array(
							'title' => 'Wenger',
						),
						
					),
				),
				'Biuro i biznes' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Akcesoria biurowe',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Akcesoria do telefonów',
						),
						array(
							'title' => 'Akcesoria komputerowe',
						),
						array(
							'title' => 'Antystresy',
						),
						array(
							'title' => 'Kalkulatory',
						),
						array(
							'title' => 'Karteczki samoprzylepne',
						),
						array(
							'title' => 'Notatniki VIP',
						),
						array(
							'title' => 'Notesy',
						),
						array(
							'title' => 'Portfele',
						),
						array(
							'title' => 'Stojaki biurkowe',
						),
						array(
							'title' => 'Wizytowniki',
						),
						array(
							'title' => 'Wskaźniki laserowe',
						),
					),
				),
				'Parasole i peleryny' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Parasole reklamowe',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Parasole VIP',
						),
						array(
							'title' => 'Płaszcze przeciwdeszczowe',
						),
					),
				),
				'Święta i okazje specjalne' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Boże narodzenie',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Nagrody',
						),
						array(
							'title' => 'Walentynki',
						),
					),
				),
				'Dom i ogród' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Akcesoria do wina',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Akcesoria kuchenne',
						),
						array(
							'title' => 'Akcesoria łazienkowe',
						),
						array(
							'title' => 'Fartuchy i rękawice kuchenne',
						),
						array(
							'title' => 'Głośniki i słuchawki',
						),
						array(
							'title' => 'Ogród',
						),
						array(
							'title' => 'Otwieracze',
						),
						array(
							'title' => 'Pojemniki na żywność',
						),
						array(
							'title' => 'Ramki na zdjęcia',
						),
						
					),
				),
				'Zdrowie i uroda' => array(
					'class' => '',
					'pikto' => '',
					'logo' => '',
					'items' => array(
						array(
							'title' => 'Akcesoria medyczne',
							'pikto' => '',
							'logo' => '',
						),
						array(
							'title' => 'Higiena osobista',
						),
						array(
							'title' => 'Kosmetyczki',
						),
						array(
							'title' => 'Kosmetyki',
						),
						array(
							'title' => 'Krokomierze',
						),
						array(
							'title' => 'Lusterka',
						),
						array(
							'title' => 'Relaks',
						),
						array(
							'title' => 'Zestawy do manicure',
						),
						
					),
				),
			
			);
			
			function custom_sort( $a, $b ){
				$val_a = $a[ 'title' ];
				$val_b = $b[ 'title' ];
				
				return $val_a == $val_b?( 0 ):( $val_a < $val_b?( -1 ):( 1 ) );
				
			}
			
			ksort( $input );
			
/*
Array
(
	[Gadżety reklamowe] => Array
		(
			[class] => reklamowe
			[items] => Array
				(
					[0] => Array
						(
							[title] => Materiały piśmiennicze
							[pikto] => pisemnicze.png
							[sub] => Array
								(
									[0] => Array
										(
											[title] => Długopisy metalowe
										)
*/
	
	// usort( $input[ 'Gadżety reklamowe' ][ 'items' ], "custom_sort" );
	foreach( $input as $key_kat => $kategoria ){
		usort( $input[ $key_kat ][ 'items' ], "custom_sort" );
		
		foreach( $kategoria[ 'items' ] as $key_subkat => $subkat ){
			usort( $input[ $key_kat ][ 'items' ][ $key_subkat ][ 'sub' ], "custom_sort" );
		
		}
		
	}
	
/*
<ul class='menu'>
	<li class='item flex flex-column reklamowe' item-slug='gadzety_reklamowe' item-title='gadżety reklamowe'>
		<div class='head flex flex-items-center '>
			<div class='title uppercase bold'>gadżety reklamowe</div>
			<span class='icon fa fa-angle-right'></span>
			
		</div>
		<ul class='sub flex flex-column'>
			<a class='item flex flex-column' href='http://poligon.scepter.pl/PiotrM/wp_merkuriusz/kategoria?cat=vip_pismiennicze,mark_twain,vip_pismiennicze-mark_twain' item-slug='mark_twain' item-title='mark twain'>
				<div class='head grow flex flex-items-center'>
					<img class='pikto' src='http://poligon.scepter.pl/PiotrM/wp_merkuriusz/wp-content/themes/merkuriusz/img/piktogramy/pen1.png'>
					<div class='logotyp flex grow bgimg contain flex-self-stretch' style='background-image: url(http://poligon.scepter.pl/PiotrM/wp_merkuriusz/wp-content/themes/merkuriusz/img/logotypy/marktwain.svg);'></div>
					<span class='icon fa fa-angle-double-right'></span>
					
				</div>
			</a>
			<div class='item flex flex-column' item-slug='przeciwdeszczowe' item-title='Przeciwdeszczowe'>
				<div class='head grow flex flex-items-center'>
					<img class='pikto' src='http://poligon.scepter.pl/PiotrM/wp_merkuriusz/wp-content/themes/merkuriusz/img/piktogramy/parasole.png'>
					<div class='title'>Przeciwdeszczowe</div>
					<span class='icon'>+</span>
					
				</div>
				<div class='sub flex flex-column'>
					<a class='item flex flex-column' href='http://poligon.scepter.pl/PiotrM/wp_merkuriusz/kategoria?cat=gadzety_reklamowe,przeciwdeszczowe,przeciwdeszczowe-parasole' item-slug='parasole' item-title='Przeciwdeszczowe'>
						<div class='head grow flex flex-items-center'>
							<div class='title'>Parasole</div>
							<span class='icon fa fa-angle-double-right'></span>
							
						</div>
						
					</a>
					
				</div>
				
			</div>
			
		</ul>
		
	</li>
	
</ul>
*/
			
			if( !empty( $_GET['cat'] ) ){
				$query = explode( ",", $_GET['cat'] );
			}
			else{
				$query = array( "", "" );
				
			}
			
			$icon_arrow = "<span class='icon fa fa-angle-right'></span>";
			$icon_double_arrow = "<span class='icon fa fa-angle-double-right'></span>";
			$icon_plus = "<span class='icon'>+</span>";
			
			// LISTA GŁÓWNA
			echo "<ul class='menu'>";
			echo "<div class='title bold uppercase flex flex-items-center'>Nasz sklep</div>";
			foreach( $input as $cat_name => $cat_data ){
				$cat_slug = apply_filters( 'stdName', $cat_name );
				if( $query[0] === $cat_slug ){
					$cat_active = 'active';
					
				}
				else{
					$cat_active = '';
					
				}
				
				// PIERWSZY STOPIEŃ
				printf( "<li class='item flex flex-column %s %s' item-slug='%s' item-title='%s'>
						<div class='head flex flex-items-center %s' %s>
							<div class='title'>
								%s
							</div>
							%s
						</div>
						<ul class='sub flex flex-column'>",
					$cat_data['class'],
					$cat_active,
					$cat_slug,
					$cat_name,
					!empty( $cat_data[ 'texture' ] )?( 'bgimg bg-repeat bg-top animate' ):( '' ),
					!empty( $cat_data[ 'texture' ] )?( "style='background-image:url({$cat_data[ 'texture' ]});'" ):( '' ),
					$cat_name,
					!empty( $cat_data[ 'items' ] )?( $icon_arrow ):( '' )
				);
				
				foreach( $cat_data['items'] as $item ){
					$item_slug = apply_filters( 'stdName', $item['title'] );
					if( $query[0] === $cat_slug && $query[1] === $item_slug ){
						$item_active = 'active';
						
					}
					else{
						$item_active = '';
						
					}
					
					if( empty( $item['sub'] ) ){
						printf( "<a class='item flex flex-column %s %s' href='%s' item-slug='%s' item-title='%s'>",
							$item['class'],
							$item_active,
							home_url( sprintf( "kategoria?cat=%s,%s", $cat_slug, $item_slug ) ),
							$item_slug,
							$item['title']
						);
						
					}
					else{
						printf( "<div class='item flex flex-column %s %s' item-slug='%s' item-title='%s'>",
							$item['class'],
							$item_active,
							$item_slug,
							$item['title']
						);
						
					}
					
						echo "<div class='head grow flex flex-items-center'>";
							if( !empty( $item['pikto'] ) ){
								printf( "<img class='pikto' src='%s/img/piktogramy/%s'>", get_template_directory_uri(), $item['pikto'] );
							}
							if( !empty( $item['title'] ) && empty( $item['logo'] ) ){
								printf( "<div class='title'>%s</div>", $item['title'] );
							}
							if( !empty( $item['logo'] ) ){
								printf( "<div class='logotyp flex grow bgimg contain flex-self-stretch' style='background-image: url(%s/img/logotypy/%s);'></div>", get_template_directory_uri(), $item['logo'] );
							}
							
							if( !empty( $item[ 'sub' ] ) ){
								echo $icon_plus;
								
							}
							else{
								echo $icon_double_arrow;
								
							}
							
						echo "</div>";	
						
					// DRUGI STOPIEŃ
					if( !empty( $item['sub'] ) ){
						echo "<div class='sub flex flex-column'>";
							
							foreach( $item['sub'] as $subitem ){
								$subitem_slug = apply_filters( 'stdName', $subitem[ 'title' ] );
								$t = explode( "-", end( $query ) );
								if( $query[0] === $cat_slug && $query[1] === $item_slug && $t[1] === $subitem_slug ){
									$subitem_active = 'active';
								}
								else{
									$subitem_active = '';
									
								}
								
								printf( "<a class='item flex flex-column %s %s' href='%s' item-slug='%s' item-title='%s'>",
									$item['class'],
									$subitem_active,
									home_url( sprintf( "kategoria?cat=%s,%s,%s-%s", $cat_slug, $item_slug, $item_slug, $subitem_slug ) ),
									$subitem_slug,
									$item['title']
								);
							
									echo "<div class='head grow flex flex-items-center'>";
										if( !empty( $subitem['pikto'] ) ){
											printf( "<img class='pikto' src='%s/img/piktogramy/%s'>", get_template_directory_uri(), $subitem['pikto'] );
										}
										if( !empty( $subitem['title'] ) && empty( $subitem['logo'] ) ){
											printf( "<div class='title'>%s</div>", $subitem['title'] );
										}
										if( !empty( $subitem['logo'] ) ){
											printf( "<div class='logotyp flex grow bgimg contain flex-self-stretch' style='background-image: url(%s/img/logotypy/%s);'></div>", get_template_directory_uri(), $subitem['logo'] );
										}
										
										echo $icon_double_arrow;
										
									echo "</div>";
								
								echo "</a>";
								
							}
						
						echo "</div>";
						
						echo "</div>";
					}
					else{
						echo "</a>";
						
					}
						
				}
					
				echo "</ul>";
				
			}
			echo "</ul>";
			
			
		?>
	</div>
	
</div>